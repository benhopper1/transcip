var querystring = require('querystring');
var http  = require('http');

console.log('SOURCE:' + process.argv[2]);
console.log('TARGET:' + process.argv[3]);

var query = querystring.stringify({
    input : process.argv[2],
});

var req = http.request(
    {
        method   : 'POST',
        hostname : 'javascript-minifier.com',
        path     : process.argv[3],
    },
    function(resp) {
        // if the statusCode isn't what we expect, get out of here
        if ( resp.statusCode !== 200 ) {
            console.log('StatusCode=' + resp.statusCode);
            return;
        }

        resp.pipe(process.stdout);
    }
);
req.on('error', function(err) {
    throw err;
});
req.setHeader('Content-Type', 'application/x-www-form-urlencoded');
req.setHeader('Content-Length', query.length);
req.end(query, 'utf8');

//curl -X POST -s --data-urlencode 'input@/home/ben/git_project/transcip/trans/express/public/js/jquery/hopper/jquery.hopper.extention.js' http://javascript-minifier.com/raw > /home/ben/git_project/transcip/trans/express/public/js/arfsync.mini.js